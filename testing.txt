Upgrade process:

	- Familiarize yourself with https://wiki.gentoo.org/wiki/Project:Toolchain/sys-kernel/linux-headers
	  and README*.
	- Generate the gentoo-headers-base-<kernel version>.tar.xz tarball:
	  $ ./rip-headers.sh 5.15
	- Create a new patchset dir:
	  $ cp -a 5.15/ 5.15/
	  $ git add 5.15
	- Generate the patchset tarball:
	  $ ./make-tarball.sh 5.15 1
	- Update the ebuild:
	  $ cp linux-headers-5.14.ebuild linux-headers-5.15.ebuild
	- Test it (see sections below)
	- Upload tarballs & commit files

Smoke test:

	for h in `find /usr/include/linux -type f -printf '%P '` ; do
		h="linux/$h"; echo "$h"
		gcc -x c -c -o /dev/null - <<<"#include <$h>"
	done

	egrep -l -r -e '__[us](8|16|32|64)' /usr/include/linux/ | xargs grep -L linux/types.h

	find /usr/include/linux -type f -printf '%P '

Common packages that break:

	pkgs=$(sed -n '/^%/,/^%/{s:%::;p}' testing.txt)
	emerge --keep-going -1v ${pkgs} --jobs 4

%
app-metrics/collectd
app-cdr/cdrdao
app-cdr/cdrtools
app-cdr/dvd+rw-tools
app-emulation/qemu
app-misc/inputlircd
app-text/a2ps
dev-util/strace
media-libs/libv4l
media-tv/ivtv-utils
media-video/vdr
net-analyzer/ipsumdump
net-dialup/linux-atm
net-dialup/ppp
net-dialup/rp-pppoe
net-dns/dnsmasq
net-firewall/iptables
net-libs/libtrace
net-misc/bridge-utils
net-misc/dhcpcd
net-misc/iputils
net-misc/lksctp-tools
net-misc/sntpd
net-misc/socat
net-proxy/shadowsocks-libev
net-wireless/iw
net-wireless/wireless-tools
net-wireless/wpa_supplicant
sys-apps/acl
sys-apps/attr
sys-apps/busybox
sys-apps/iproute2
sys-apps/kbd
sys-apps/net-tools
sys-apps/sandbox
sys-apps/setserial
sys-apps/systemd
sys-apps/systemd-utils
sys-block/fio
sys-block/sedutil
sys-boot/efibootmgr
sys-boot/syslinux
sys-devel/gdb
sys-fs/fuse
sys-libs/efivar
sys-libs/gpm
sys-libs/libcap
sys-process/audit
sys-process/criu
sys-process/lsof
%

then make sure the big one:

sys-libs/glibc
